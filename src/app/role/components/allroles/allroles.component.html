<ng-container *ngIf="loader; else thisshow">
  <div class="page-wrapper">
    <div class="wrapper container-xxl px-0">
      <div class="p-4">


        <div class="d-flex justify-content-center">
          <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>


      </div>
    </div>
  </div>
</ng-container>

<ng-template #thisshow>
  <div class="page-wrapper">
    <div class="wrapper container-xxl px-0">
      <div class="p-4">
        <div class="d-md-flex justify-content-md-between">
          <h4 class="mb-lg-4 mb-2 fw-semibold">All Roles</h4>
        </div>
        <div class="row">
          <div class="col-md-12 col-12">
            <div class="card">
              <div class="card-body user_list">
                <div class="d-flex justify-content-between">
                  <h5 class="card-title fw-semibold">Roles:-</h5>
                  <button
                    class="btn fw-bolder border border-primary mb-5"
                    (click)="createrole()"
                  >
                    Create Role
                  </button>
                </div>
                <table
                  class="table mb-0 text-nowrap border-start border-end"
                  id="basic-datatable"
                >
                  <thead>
                    <tr>
                      <th>Role</th>
                      <th>Permission</th>
                      <th class="text-md-end">Action</th>
                    </tr>
                  </thead>
                  <tbody *ngFor="let role of roleListData">
                    <tr class="align-middle">
                      <td>
                        <div class="d-flex align-items-center">
                          <div class="ms-3">
                            <h6 class="mb-0 fw-medium">{{ role.roleName }}</h6>
                          </div>
                        </div>
                      </td>
                      <td>
                        <div (click)="permission(role._id, role.roleName)">
                          <button class="btn border" [disabled]="submitted">
                            view permissions
                          </button>
                        </div>
                      </td>
                      <td class="text-md-end">
                        <button
                          class="btn btn-primary btn-sm me-1"
                          (click)="updaterole(role._id)"
                        >
                          Edit
                        </button>
                        <button
                          class="btn btn-danger btn-sm me-1"
                          [disabled]="submitted"
                          (click)="deleterole(role._id)"
                        >
                          Delete
                        </button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div
    class="modal"
    tabindex="-1"
    role="dialog"
    [ngStyle]="{ display: displayStyle }"
  >
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">{{ rname }}</h4>
        </div>
        <div class="modal-body">
          <div class="" *ngFor="let per of permissions">
            <div class="form-check form-switch" *ngIf="permissionData">
              <label
                class="form-check-label form-label fw-medium mb-2"
                for="flexSwitchCheckChecked"
                >{{ per.title }}</label
              >
              <input
                class="form-check-input"
                type="checkbox"
                role="switch"
                id="flexSwitchCheckChecked"
                name="{{ per.value }}"
                checked
                [ngModel]="permissionData[per.value]"
                [disabled]="true"
                ngModel
              />
            </div>
          </div>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-danger" (click)="closePopup()">
            Close
          </button>
        </div>
      </div>
    </div>
  </div>
</ng-template>
